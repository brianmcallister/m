(function(t,i){"use strict";function s(){return e}var e,n;n={classPrefix:"m",wrapperClass:null,clickToOpen:!0,arrowString:!0},e=function(i,s){return this.$element=t(i),this.options=t.extend({},n,s),this.options.classPrefix=this.options.classPrefix?this.options.classPrefix+"-":"",this.setElementReferences().buildCustomHtml().setPlaceholderText().bindCustomEvents(),this},e.prototype={prefix:function(t){return this.options.classPrefix+t},showList:function(){return this.options.$list.css("display","block"),this},hideList:function(){return this.options.$list.css("display","none"),this},getOptionData:function(t){return{text:t.text(),value:t.val()||t.data("value")}},setPlaceholderText:function(){return this.updateTitle(this.getOptionData(this.getSelected())),this},updateTitle:function(t){return this.options.$titleTarget.text(t.text),this},updateSelect:function(t){return this.options.$select.val(t.value),this.options.$select.data("m").patchedVal||this.options.$select.trigger("change"),this},setElementReferences:function(){var i;return this.options.$select=this.$element.addClass(this.prefix("select")),t.extend(this.options,{$wrapper:t("<div />",{"class":this.prefix("select-box-wrapper")}),$title:t("<span />",{"class":this.prefix("title")}),$titleTarget:this.options.$title,$list:t("<ul />",{"class":this.prefix("list")})}),this.options.arrowString!==!1&&(i="&#x25BE;","string"==typeof this.options.arrowString&&(i=this.options.arrowString),this.options.$title.attr("class",this.prefix("title-wrap")).append('<span class="'+this.prefix("title-target")+'"></span>'+'<span class="'+this.prefix("arrow-icon")+'">'+i+"</span>"),this.options.$titleTarget=this.options.$title.find("."+this.prefix("title-target"))),this},buildCustomHtml:function(){var i=this.options.$select.find("option");return this.options.$select.wrap(this.options.$wrapper),this.options.$wrapper=this.options.$select.parent(),this.options.wrapperClass&&this.options.$wrapper.addClass(this.prefix(this.options.wrapperClass)),i.each(t.proxy(function(i,s){var e=t(s),n=e.val(),o=e.text(),l='<li data-value="'+n+'">'+o+"</li>";""===n&&(l=l.slice(0,4)+'class="'+this.prefix("placeholder")+'"'+l.slice(4)),this.options.$list.append(l)},this)),this.options.$wrapper.append(this.options.$title,this.options.$list),this},bindCustomEvents:function(){return this.options.$list.on("click","li",t.proxy(function(i){var s=t(i.target),e=this.getOptionData(s);this.updateSelect(e),s.addClass("selected").siblings().removeClass("selected")},this)),this.options.$select.on("change",t.proxy(this.setPlaceholderText,this)),this.options.clickToOpen&&this.clickToOpen(),this},getSelected:function(){return this.options.$select.find(":selected")},clickToOpen:function(){var s=t(i),e=this;return this.options.$list.css("display","none").on("click.m","li",function(){e.hideList(),s.off("click.m")}),this.options.$title.on("click.m",t.proxy(function(){"block"!==this.options.$list.css("display")?(this.showList(),setTimeout(function(){s.on("click.m",function(t){t.preventDefault(),e.hideList(),s.off("click.m")})},15)):(this.hideList(),s.off("click.m"))},this)),this}},t.m=s(),t.fn.m=function(i){return this.each(function(){var s,e=t(this);e.data("m")||(s=new t.m(e,i),e.data("m",s))})}})(window.jQuery,window,document);